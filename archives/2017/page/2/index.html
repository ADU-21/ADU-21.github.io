<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/styles.css"><title>杜屹东的博客</title></head><body><div class="container"><div class="columns page-header"><h1>杜屹东的博客</h1></div><div class="columns"><div class="navigation"><nav class="menus-main"><a href="/" class="favicon"><img alt="杜屹东的博客" src="/favicon.png"></a><a href="/about">关于我</a><a href="/list">日志列表</a><a href="/booklist">读书</a><a href="/movie">电影</a><a href="/links">链接</a><a href="/resume">简历</a></nav><nav class="right menus-right"><a target="_blank" href="https://github.com/ADU-21/blog">Fork on Github</a></nav></div></div><div class="columns"><div class="block-body column three-fourths"><div class="article-widget"><a href="https://www.duyidong.com">小广告旗帜~~</a></div><article><header><h2><a href="/2017/03/06/浅谈AWS-IAM/">浅谈AWS IAM</a></h2></header><div class="article-meta clearfix"><time class="left">2017 3 月 6 日</time><ul class="tags left"></ul><ul class="tags right"><li><a href="/tags/AWS/">AWS</a></li><li><a href="/tags/Security/">Security</a></li><li><a href="/tags/IAM/">IAM</a></li></ul></div><div class="markdown-body"><h1 id="浅谈-AWS-IAM"><a href="#浅谈-AWS-IAM" class="headerlink" title="浅谈 AWS IAM"></a>浅谈 AWS IAM</h1><p>IAM，全称Identity &amp; Access Management，作用是AWS资源的权限管理。</p>
<h2 id="IAM解决了什么问题"><a href="#IAM解决了什么问题" class="headerlink" title="IAM解决了什么问题"></a>IAM解决了什么问题</h2><p>解决了什么问题，等同于带来了什么价值，在AWS的<a href="https://aws.amazon.com/iam/details/" target="_blank" rel="external">官方文档</a>中，IAM主要是出于以下需求被设计出来的：</p>
<ul>
<li><strong>增强安全：</strong>AWS给每个用户单独的验证，保证每个用户能够被分配恰当的权限，从而保证AWS资源的安全。默认情况下，IAM的User在被创建的时候是没有任何权限的，所以IAM是默认安全的。</li>
<li><strong>粒度控制：</strong>IAM让租户可以进行细粒度的权限控制，比如terminate instance的权限，比如对S3 bucket中对象的只读权限。</li>
<li><strong>临时证书：</strong>IAM允许创造生命周期短于用户的权限（Role），Role被绑定在AWS资源（如EC2 instance）上，确保资源之间的相互调用有适当的权限。</li>
<li><strong>灵活的安全证书管理：</strong>IAM提供了多种验证方式，包括key pair， 用户名密码，X.509 certificates， MFA，用于Console，CLI，sdk等API调用。</li>
<li><strong>外部身份系统：</strong>IAM使AWS支持第三方登录或与企业现有权限管理系统集成，比如微软的Active Directory，或第三方验证，比如Google，Facebook。</li>
<li><strong>与AWS服务无缝贴合：</strong>IAM与AWS的几乎所有服务集成，首先你需要IAM的权限再能访问和使用AWS的服务，其次AWS中的服务需要IAM的权限才能完成对AWS其他资源的调用。</li>
</ul>
<h2 id="几个概念"><a href="#几个概念" class="headerlink" title="几个概念"></a>几个概念</h2><p>AWS的官方文档和很多博客都在说的Get Start，最重要的就是AWS中的几个名词：</p>
<ul>
<li><strong>User：</strong>一个User对应一个AWS用户，这个用户指的是一个真实的用户，用户在创建初期是没有任何权限的，需要被加到用户组或绑定Policy才能有相应权限，User有两种验证方式，一种是key pair，常用于集成到程序中和AWS CLI 使用，另一种是Username+Password的方式，这种方式只能用于Console登录。</li>
<li><strong>UserGroup：</strong>类比Linux系统的UserGroup，一个UserGroup可以包含多个User，这些User具有UserGroup指定的所有权限，UserGroup的权限由Policy制定，Group不能嵌套Group，一个用户如在多个UserGroup中，权限取Group权限的和。</li>
<li><strong>Policy：</strong>由“资源类型”和“操作类型”两个重要参数构成的Json文件，用于定义一定粒度的权限，支持模糊匹配（*），分为官方定义和自己定义，用于定义用户可对何种资源执行何种操作，Policy可以与User，UserGroup，Role绑定。</li>
<li><strong>Role：</strong>IAM定义用于代替User赋予资源权限的权限单位，比如给一个EC2 instance S3 administrator的权限，便可以在改Instance上执行aws s3的所有命令，且在本地不会出现Creadentical文件（比User安全）。与User相同，Role 的权限也由Polic组成，由用户定义。另外，Role还可以用于赋予外部账号权限。</li>
</ul>
<h2 id="官方推荐最佳实践"><a href="#官方推荐最佳实践" class="headerlink" title="官方推荐最佳实践"></a>官方推荐最佳实践</h2><p>参照官方文档：<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html" target="_blank" rel="external">https://docs.aws.amazon.com/IAM/latest/UserGuide/best-practices.html</a></p>
<ul>
<li>禁用AWS Root账户：因为Root用户权限实在太大，要尽可能避免Root账户认证被泄露的风险，建议不要给Root账户创建Access Key，另外开启MFA验证。</li>
<li>为每个用户创建单独的User</li>
<li>尽可能使用Policies 添加权限</li>
<li>使用UserGroup对用户权限进行分组管理</li>
<li>最小权限原则</li>
<li>开启强密码限制</li>
<li>开启MFA设备验证</li>
<li>为EC2 instance上的应用程序创建Role</li>
<li>使用Role而不是User的Credentials</li>
<li>经常更新Credentials</li>
<li>移除不再使用的Creadentials</li>
<li>使用策略提高额外的安全性：比如限制该资源只能从哪个网段访问，只能在某个时间段访问，强制开启MFA验证后才可访问，等等</li>
<li>监控账户活动情况：CloudFront, CloudTrail, CloudWatch, Config, S3 log都可以保证账户活动被监控</li>
</ul>
<h2 id="限制"><a href="#限制" class="headerlink" title="限制"></a>限制</h2><p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html" target="_blank" rel="external">https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html</a><br>大部分限制大部分情况下都碰不到，列几个常见的：</p>
<ul>
<li>每个User最多可被加入到10个UserGroup</li>
<li>每个User最多可以有2个Access key(包括root account)</li>
<li>一个用户只能验证一个MFA设备</li>
<li>User Policy的长度限制为2KB</li>
<li>Role Policy的长度限制为10KB</li>
<li>UserGroup Policy的长度限制为5KB</li>
</ul>
<h2 id="几个知识点"><a href="#几个知识点" class="headerlink" title="几个知识点"></a>几个知识点</h2><p>以下知识点是笔者在查阅 <a href="https://aws.amazon.com/iam/faqs/" target="_blank" rel="external">FAQs</a> 时记录的：</p>
<ul>
<li>一个EC2 instance不能有多个Role，但一个Role可以被多个EC2 instance共用</li>
<li>Role可以被attach 到一个正在运行的实例</li>
<li>可以将Role与Auto Scaing Group关联，这样每个在该安全组内被启动的实例都会被附上该Role所指的权限</li>
<li>AWS有一个用于测试你的Polic的工具：<a href="https://policysim.aws.amazon.com/" target="_blank" rel="external">Policy Simulator</a></li>
<li>IAM的每一个记录都会被CloudTrail记录log，保存在S3中</li>
</ul>
</div></article><article><header><h2><a href="/2017/02/28/AWS-Services-Overview/">AWS Services Overview</a></h2></header><div class="article-meta clearfix"><time class="left">2017 2 月 28 日</time><ul class="tags left"></ul><ul class="tags right"><li><a href="/tags/AWS/">AWS</a></li></ul></div><div class="markdown-body"><h1 id="AWS-Services-Overview"><a href="#AWS-Services-Overview" class="headerlink" title="AWS Services Overview"></a>AWS Services Overview</h1><p>最近在准备AWS助理级架构师认证考试，借此机会梳理一下AWS比较核心的几个服务，不会太深入细节，只做简单阐释。<br>首先关于AWS服务一览：</p>
<p><img src="/images/AWS_Services_Overview.png" alt=""></p>
<p>以下服务会出现在助理级架构师考试中：</p>
<p><img src="/images/AWS_Services_Exam.png" alt=""></p>
<p>下面就按照这个顺序过一下AWS的众多服务。</p>
<h2 id="AWS-Global-Infrastructure"><a href="#AWS-Global-Infrastructure" class="headerlink" title="AWS Global Infrastructure"></a>AWS Global Infrastructure</h2><p>AWS拥有全球化的基础设施让你的服务可以在瞬间扩展到全球，你可以在<a href="https://aws.amazon.com/about-aws/global-infrastructure/" target="_blank" rel="external">这里</a>查看亚马逊当前拥有的全球基础设施信息。<br>截止到今天（2017.02.28）AWS Cloud在全球共有<strong>42</strong>个<code>Availablity Zone</code>和<strong>16</strong>个<code>geographic Regions</code>，中国区有2个Region分别在北京和宁夏（宁夏区暂未开放），每个Region各有两个AZ，受政策限制，AWS中国区与其他各地区服务分离，由<a href="https://www.sinnet.com.cn/home/product/indexyun/16" target="_blank" rel="external">光环新网</a>代理，需要单独<a href="https://www.amazonaws.cn/en/sign-up/" target="_blank" rel="external">申请账号</a>。</p>
<p><img src="https://d0.awsstatic.com/global-infrastructure/Global_Infrastructure_12-15-2016.png" alt=""></p>
<h3 id="Region-amp-Availablity-Zone"><a href="#Region-amp-Availablity-Zone" class="headerlink" title="Region &amp; Availablity Zone"></a>Region &amp; Availablity Zone</h3><p>Region是AWS按物理地理划分的节点，每个Region包含两个或以上AZ，AZ可以理解为同在一个Region的多个数据中心。之所以一个Region要有至少两个Region是因为AWS很多服务都推荐跨AZ备份而做到高可用。<br>另外AZ之间网络通信延迟远大于Region之前通信，原因也很好理解，Region的物理距离很远，而同Region的AZ是在同一个城市。</p>
<h3 id="Edge-Location"><a href="#Edge-Location" class="headerlink" title="Edge Location"></a>Edge Location</h3><p>Edge Location是比亚马逊数据中心覆盖面还广的服务，我们访问AWS console就使用过Edge Location，同时Edge Location还作为AWS Cloudfront（CDN）服务的节点，你可以在<a href="https://www.google.com/maps/d/viewer?msa=0&amp;mid=z8tAG_iMI0RE.kBLn8p8h4GGw" target="_blank" rel="external">这里</a>看到AWS服务在全球分布的情况，在<a href="https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services/#AWS Edge Network Locations" target="_blank" rel="external">这里</a>查看AWS的Edge Location分部情况。</p>
<h2 id="Networking-amp-Content-Deivery"><a href="#Networking-amp-Content-Deivery" class="headerlink" title="Networking &amp; Content Deivery"></a>Networking &amp; Content Deivery</h2><p>这一部分的内容主要包含网络和CDN。</p>
<h3 id="VPC"><a href="#VPC" class="headerlink" title="VPC"></a>VPC</h3><p>VPC(<a href="https://aws.amazon.com/vpc/" target="_blank" rel="external">Virtual Private Cloud</a>)，AWS服务中关于网络最重要的一个服务，作用是在AWS中虚拟一个定制化局域网，从而可以像管理一个虚拟数据中心一样管理AWS中的资源。一个Region最多可以有5个VPC，你可以自由定义VPC的局域网网段（当然要使用专用网段），每个VPC之间可以单点连通前提是专用网段不重复。<br>VPC就是一个虚拟的局域网，可以通过给VPC绑定InternetGateway的方式让VPC成为public VPC，即在外网可以访问VPC内的服务。就好比公司网络中加了一个从内网出去的路由。当然要让外网的设备找到VPC中的资源还需要给VPC中的资源绑定一个公网IP。</p>
<h3 id="Route53"><a href="#Route53" class="headerlink" title="Route53"></a>Route53</h3><p><a href="https://aws.amazon.com/route53/" target="_blank" rel="external">Route53</a>是AWS的DNS服务。可以注册DNS，配置A地址和CNAME。</p>
<h3 id="Cloud-Front"><a href="#Cloud-Front" class="headerlink" title="Cloud Front"></a>Cloud Front</h3><p><a href="https://aws.amazon.com/cloudfront/" target="_blank" rel="external">Cloud Front</a>是亚马逊的CDN（Content Delivery Network）服务，用于缓存下载或上传的数据。</p>
<h3 id="Direct-Connect"><a href="#Direct-Connect" class="headerlink" title="Direct Connect"></a>Direct Connect</h3><p><a href="https://aws.amazon.com/directconnect/" target="_blank" rel="external">Direct Connect</a>是亚马逊的网络直连服务，就是用一跟又粗又长的网线，从你的数据中心翻山越岭地连接到AWS的数据中心从而建立一个稳定可靠高效的私有连接。</p>
<h2 id="Compute"><a href="#Compute" class="headerlink" title="Compute"></a>Compute</h2><p><a href="https://aws.amazon.com/products/compute/" target="_blank" rel="external">AWS Compute</a>包含了亚马逊最重要的服务——计算服务</p>
<h3 id="EC2"><a href="#EC2" class="headerlink" title="EC2"></a>EC2</h3><p>EC2(<a href="https://aws.amazon.com/ec2/" target="_blank" rel="external">Elastic Compute Cloud</a>)可以理解为AWS的虚拟机，包含存储（EBS），镜像（AMI），备份（snapshot），防火墙（Security Group）等紧密相关的服务，AWS的一部分服务也是基于EC2的，比如ECS和RDS。<br>使用EC2你可以按照你的需要创建Instance，不仅可以自由控制Instance的数量，还可以动态调整虚拟机的各种参数，比如内存，CPU。最重要的是，使用AWS EC2你可以——按需付费。</p>
<h3 id="EC2-Contianer-Service"><a href="#EC2-Contianer-Service" class="headerlink" title="EC2 Contianer Service"></a>EC2 Contianer Service</h3><p>ECS(<a href="https://aws.amazon.com/ecs/" target="_blank" rel="external">EC2 Contianer Service</a>)帮助管理在EC2上运行Docker或容器集群，适用于构建微服务。</p>
<blockquote>
<p>注：该服务不会出现在SAA考试中</p>
</blockquote>
<h3 id="Elastic-Beanstalk"><a href="#Elastic-Beanstalk" class="headerlink" title="Elastic Beanstalk"></a>Elastic Beanstalk</h3><p><a href="https://aws.amazon.com/elasticbeanstalk/" target="_blank" rel="external">Elastic Beanstalk</a>是一个用于方便部署web服务的一个傻瓜式应用，你不需要知道关于AWS的一切，只需要上传代码，Beanstalk会帮你选择合适的环境，运行环境，负载均衡，监控等等，目前支持语言包括 Java, .NET, PHP, Node.js, Python, Ruby, Go。</p>
<blockquote>
<p>注：该服务不会出现在SAA考试中，只需要知道Beanstalk是什么就可以。</p>
</blockquote>
<h3 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h3><p><a href="https://aws.amazon.com/lambda/" target="_blank" rel="external">Lambda</a>是一个云计算革命性的服务，关键词<strong>Serverless</strong>，也是AWS这几年大力在推的服务，主要特点是除了功能性的function以外的所有服务（操作系统，物理硬件，运行环境）都由AWS管理，资源只在被调用时创建并在使用完后立即销毁，最大限度地做到了高可用高伸缩，同时非常便宜，按照访问次数收费。（每百万次0.05美刀）<br>主要使用场景是流处理，应用后端。</p>
<blockquote>
<p>注：因为是比较新的服务，所以暂时还没有在SAA考试或样题中出现，但毫无疑问这是AWS一个重要的服务。</p>
</blockquote>
<h3 id="Lightsail"><a href="#Lightsail" class="headerlink" title="Lightsail"></a>Lightsail</h3><p><a href="https://amazonlightsail.com/" target="_blank" rel="external">Lightsail</a>与Elastic Beanstalk类似，也是一个给不会使用AWS的用户提供自动化部署的一个服务。</p>
<blockquote>
<p>注：该服务不算是AWS的核心服务，仅作为了解，考试内容不会涉及。</p>
</blockquote>
<h2 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h2><p><a href="https://aws.amazon.com/products/storage/" target="_blank" rel="external">AWS Storage</a>包含了AWS存储有关的服务，这里暂不列举EBS。</p>
<h3 id="S3"><a href="#S3" class="headerlink" title="S3"></a>S3</h3><p>S3(<a href="https://aws.amazon.com/s3/" target="_blank" rel="external">Simple Storage Service</a>) 差不多是和AWS一样老的一个服务，同时支撑着AWS中很多其他的服务。<br>S3是一个高可用的对象存储服务，可以理解为一个巨大的磁盘可以存放图片，视频一类的大小静态文件，其存储持久性可达到11个9，可用性可以达到4个9。S3的对象存储单个文件最大可达5TB，总大小不设上限。同时S3可以作为静态网站使用，可以开启版本管理。本博客也准备迁移到AWS S3上。<br>S3的使用场景可以用作静态网站部署，数据存储（例如数据胡泊），用于数据分析，数据备份等。当然也可以用来构建Serverless服务。</p>
<h3 id="Clacier"><a href="#Clacier" class="headerlink" title="Clacier"></a>Clacier</h3><p><a href="https://aws.amazon.com/glacier/" target="_blank" rel="external">Claier</a>是用于存档数据长期保存的一个服务，如果你有长时间不使用但是需要保存的数据，例如医院的病例，电视台的历史影像资料，你可以使用这个服务，其主要特点是异常便宜（0.004美刀/GB），同时能做到11个9的持久度。另外归档数据在提取时大概需要4-5个小时，所以不适宜存储需要频繁读写的数据。</p>
<h3 id="EFS"><a href="#EFS" class="headerlink" title="EFS"></a>EFS</h3><p>EFS(<a href="https://aws.amazon.com/efs/" target="_blank" rel="external">Elastic File System</a>)是一个可移动的块存储设备，你可以想象成一个可以任意扩容的移动硬盘，在需要时被接到任何一台EC2 instance上，同时它还具有nfs的功能，可以同时连接多台设备。EFS在刚创建的时候大小为零，随着存放资源增多逐渐扩容，真正做到按需付费，缺点是小贵，大概0.3美刀/GB</p>
<h3 id="Storage-Gateway"><a href="#Storage-Gateway" class="headerlink" title="Storage Gateway"></a>Storage Gateway</h3><p><a href="https://aws.amazon.com/storagegateway/" target="_blank" rel="external">Storage Gateway</a>是一个让你的数据中心可以和AWS存储设备无缝对接的服务，你可以像访问本地文件系统一样访问你存储在AWS云上的资源。</p>
<blockquote>
<p>注：该服务在Ops认证会被重点考察，SAA涉及不多。</p>
</blockquote>
<h2 id="Databases"><a href="#Databases" class="headerlink" title="Databases"></a>Databases</h2><p><a href="https://aws.amazon.com/products/databases" target="_blank" rel="external">AWS Cloud Database</a>提供了一系列由AWS帮你管理的数据库服务。<br>涉及到考试，重点在针对不同的使用场景选择合适的数据库服务，另外非关系型数据库的高性能高伸缩和关系型数据库如何做到高可用，读写分离也常会作为考点。</p>
<h3 id="RDS"><a href="#RDS" class="headerlink" title="RDS"></a>RDS</h3><p>RDS(<a href="https://aws.amazon.com/rds/" target="_blank" rel="external">Relation Database Serveice</a>)是一个托管在AWS上的关系型数据库，目前支持MySQL，Postgresql，SQLserver，MariaDB，Oracle和一个亚马逊自己出的Aurora（据说很屌）。</p>
<h3 id="DynamoDB"><a href="#DynamoDB" class="headerlink" title="DynamoDB"></a>DynamoDB</h3><p><a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="external">DynamoDB</a>是AWS提供的非关系型数据库，特点是高一致，低延迟，极易伸缩，相当灵活。</p>
<blockquote>
<p>注：该服务在Developor认证考试中重点考察，SAA认证也有涉及。</p>
</blockquote>
<h3 id="Redshift"><a href="#Redshift" class="headerlink" title="Redshift"></a>Redshift</h3><p><a href="https://aws.amazon.com/redshift/" target="_blank" rel="external">Redshift</a>是托管在AWS上的数据仓库，提供PB级的存储服务。</p>
<h3 id="Elasticache"><a href="#Elasticache" class="headerlink" title="Elasticache"></a>Elasticache</h3><p><a href="https://aws.amazon.com/elasticache/" target="_blank" rel="external">Elasticache</a>AWS上一个高吞吐的缓存服务，有Redis和Memcached两种类型。</p>
<h2 id="Migration"><a href="#Migration" class="headerlink" title="Migration"></a>Migration</h2><h3 id="Snowball"><a href="#Snowball" class="headerlink" title="Snowball"></a>Snowball</h3><p>AWS官方提供的物理迁移，小型的是一个手提箱，大型的有卡车大小的移动存储，帮助你将大量数据加密传输到亚马逊的云上。<br>关于Snowball一个重要的概念就是Import和Export，你可以从S3导出或导入数据到Snowball。</p>
<h3 id="DMS"><a href="#DMS" class="headerlink" title="DMS"></a>DMS</h3><p>DMS(<a href="https://aws.amazon.com/dms/" target="_blank" rel="external">Database Migration Service</a>)帮助你将本地数据库中的数据迁移到AWS上，同时还支持在AWS中不同类型的数据库之间做零宕机的数据迁移。比如从本地的Oracle中将数据迁移到AWS的Aurora上。</p>
<blockquote>
<p>注：DMS是AWS中一个重要的服务，但暂未出现在SAA的考试中。</p>
</blockquote>
<h3 id="SMS"><a href="#SMS" class="headerlink" title="SMS"></a>SMS</h3><p>SMS(<a href="https://aws.amazon.com/server-migration-service/" target="_blank" rel="external">Server Migration Service</a>)AWS服务器迁移服务是一种无代理服务，使租户能够快速将本地服务增量式地迁移到云上，具体就是将本地服务器的卷打成镜像放到云上再跑起来。</p>
<blockquote>
<p>注：该服务暂时没有在所有考试中出现。</p>
</blockquote>
<h2 id="Analytics"><a href="#Analytics" class="headerlink" title="Analytics"></a>Analytics</h2><p><a href="https://aws.amazon.com/products/analytics/" target="_blank" rel="external">Analytics</a>主要用于处理，分析，可视化数据。</p>
<h3 id="Athena"><a href="#Athena" class="headerlink" title="Athena"></a>Athena</h3><p><a href="https://aws.amazon.com/athena/" target="_blank" rel="external">Athena</a>让租户可以使用SQL交互式地查询S3中的数据，Athena是Serverless的，所以用户只需按使用次数付费。</p>
<h3 id="EMR"><a href="#EMR" class="headerlink" title="EMR"></a>EMR</h3><p>Elastic MapReduce，就是托管在AWS上的map reduce，用于管理大数据集群（EC2 instance集群）</p>
<blockquote>
<p>注：SAA考试会涉及。</p>
</blockquote>
<h3 id="Cloud-Search-amp-Elastic-Search"><a href="#Cloud-Search-amp-Elastic-Search" class="headerlink" title="Cloud Search &amp; Elastic Search"></a>Cloud Search &amp; Elastic Search</h3><p>用于构建站内搜索或应用内搜索。</p>
<blockquote>
<p>注：助理级考试均不涉及。</p>
</blockquote>
<h3 id="Kinesis"><a href="#Kinesis" class="headerlink" title="Kinesis"></a>Kinesis</h3><p><a href="https://aws.amazon.com/kinesis/" target="_blank" rel="external">Kinesis</a>强大的实时数据流处理服务，速度可达TB每小时，用于上传，分析实时数据流。比较重要。</p>
<h3 id="Data-Pipeline"><a href="#Data-Pipeline" class="headerlink" title="Data Pipeline"></a>Data Pipeline</h3><p>提供有序处理数据，洗数据，数据迁移的工作。</p>
<h3 id="Quick-Sight"><a href="#Quick-Sight" class="headerlink" title="Quick Sight"></a>Quick Sight</h3><p>为你的数据创建可视化面板。</p>
<h2 id="Security-amp-Identity"><a href="#Security-amp-Identity" class="headerlink" title="Security &amp; Identity"></a>Security &amp; Identity</h2><h3 id="IAM"><a href="#IAM" class="headerlink" title="IAM"></a>IAM</h3><p>IAM(<a href="https://aws.amazon.com/iam/" target="_blank" rel="external">Identity &amp; Access Management</a>)是AWS的权限管理服务，是一个非常重要的服务。这个服务是免费的，而且Global，即不收Region限制的。<br>关于IAM主要需要知道关于User Group, User, Role, Polic几个概念即可；User Group和User都类似于Linux中的用户组和用户的概念，不同的是AWS根据Polic赋予用户权限，关于Polic，主要就是规定可以对“何种资源”进行“何种操作”两个参数，Role的定义类似于User，但是Role不是赋予用户使用，而是赋予给AWS的资源的，例如租户需要创建一个EC2 instance，这个Instance需要操纵S3的资源，那么你需要在创建这个EC2 instance的时候赋予一个带S3操作权限的Role，需要注意的是Role只能在创建资源的时候被赋予，且不能更改不能解除绑定，另外在包含Role的instance中你无法看到AWS ACCESS KEY 之类的文本文件，这是AWS出于安全的设计。</p>
<h3 id="Inspector"><a href="#Inspector" class="headerlink" title="Inspector"></a>Inspector</h3><p><a href="https://aws.amazon.com/inspector/" target="_blank" rel="external">Inspector</a>是一个安装在EC2 instance上的客户端，用于生成安全报告。</p>
<blockquote>
<p>注：暂不在考试中出现</p>
</blockquote>
<h3 id="Certificate-Manager"><a href="#Certificate-Manager" class="headerlink" title="Certificate Manager"></a>Certificate Manager</h3><p><a href="https://aws.amazon.com/certificate-manager/" target="_blank" rel="external">Certificate Manager</a>是一个用于管理SSL证书的服务。</p>
<h3 id="Directory-Service"><a href="#Directory-Service" class="headerlink" title="Directory Service"></a>Directory Service</h3><p><a href="https://aws.amazon.com/directoryservice/" target="_blank" rel="external">Directory Service</a>让租户可以将AWS权限管理和自建数据中的AD group集合在一起，可以直接使用Microsoft AD Group创建AWS中的资源。</p>
<h3 id="WAF"><a href="#WAF" class="headerlink" title="WAF"></a>WAF</h3><p>WAF(<a href="https://aws.amazon.com/certificate-manager.com/waf/" target="_blank" rel="external">Web Application Firewall</a>)给予租户应用级别的安全防护，比如SQL注入，跨站攻击，等。</p>
<h3 id="Artifact"><a href="#Artifact" class="headerlink" title="Artifact"></a>Artifact</h3><p>这是让你能访问到AWS compliance document 的服务，可以从中获取各种合规文件。</p>
<h2 id="Management-Tools"><a href="#Management-Tools" class="headerlink" title="Management Tools"></a>Management Tools</h2><h3 id="Could-Watch"><a href="#Could-Watch" class="headerlink" title="Could Watch"></a>Could Watch</h3><p>Cloud Watch 是AWS重要的Ops工具，作用为监控AWS资源状态的工具，可以设置连个级别，分别是五分钟一个心跳（默认）和一分钟一个心跳。该服务监控类目(Metrics)繁多，甚至包括花费的监控预警，可以设置Alarm触发SNS给到租户通知实现报警的功能。</p>
<h3 id="Cloud-Formation"><a href="#Cloud-Formation" class="headerlink" title="Cloud Formation"></a>Cloud Formation</h3><p>Cloud Formation是AWS一个重要的DevOps工具，实践了基础设施及代码，租户可以使用一套模板（Template），即一个Json或者Yaml的文件定义整个AWS服务的使用，包括资源，网络，权限。是一个可以投入大量精力使用学习的一个服务。</p>
<blockquote>
<p>注：Cloud Formation是一个重要的服务，但不会在SAA考试中出现很多，只需要一定程度的了解即可，但想成为一个真正的架构师，这个服务必须要熟悉。</p>
</blockquote>
<h3 id="Cloud-Trail"><a href="#Cloud-Trail" class="headerlink" title="Cloud Trail"></a>Cloud Trail</h3><p>用于监控AWS API调用的一个服务，哪些操作属于AWS API调用——创建一个资源，改变一个资源的配置，销毁一个资源，往S3上传一个对象，都算。这些操作被Cloud Trail记录下来保存在S3中作为log供租户使用，AWS的一些边缘服务也有依赖于Cloud Trail的。但笔者在使用该服务时发现其存在延迟时间长（10-20min），无法划分日志级别，且日志冗余不易分析等缺点，仍不是很好用。</p>
<h3 id="Opsworks"><a href="#Opsworks" class="headerlink" title="Opsworks"></a>Opsworks</h3><p>AWS提供的有一个基础设施及代码的工具，使用<a href="https://www.chef.io/chef/" target="_blank" rel="external">Chef</a>。</p>
<h3 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h3><p><a href="https://aws.amazon.com/waf/" target="_blank" rel="external">Config</a>是用于记录资源配置规则变更，并判断资源配置是否合规的一个服务。</p>
<blockquote>
<p>注：该服务不会出现在助理级考试中，但会在Security的考察中出现。</p>
</blockquote>
<h3 id="Service-Catalog-amp-Trusted-Advisor"><a href="#Service-Catalog-amp-Trusted-Advisor" class="headerlink" title="Service Catalog &amp; Trusted Advisor"></a>Service Catalog &amp; Trusted Advisor</h3><p>Trusted Advisor是一个有意思的服务，从安全，省钱，性能，容错四个角度给你的AWS资源配给一个全面的分析，这四个角度也是AWS架构师设计一个良好的架构必须要考虑的四个角度。且该服务与AWS收费等级强相关，AWS的服务等级分为基础版、开发版、商业版、企业版四个级别，交的钱不同会高度体现在这个服务的内容上。<a href="https://aws.amazon.com/premiumsupport/compare-plans/" target="_blank" rel="external">https://aws.amazon.com/premiumsupport/compare-plans/</a></p>
<h2 id="Application-Services"><a href="#Application-Services" class="headerlink" title="Application Services"></a>Application Services</h2><h3 id="Step-Functions"><a href="#Step-Functions" class="headerlink" title="Step Functions"></a>Step Functions</h3><p><a href="https://aws.amazon.com/step-functions/" target="_blank" rel="external">Step Functions</a>是在2017年初才推出的一个新服务，可用于执行批处理脚本。</p>
<blockquote>
<p>注：因为该服务还很新，暂未出现在认证考试中</p>
</blockquote>
<h3 id="SWF"><a href="#SWF" class="headerlink" title="SWF"></a>SWF</h3><p>SWF(<a href="https://aws.amazon.com/swf/" target="_blank" rel="external">Simple Workflow Service</a>)让开发者可以按顺序执行一些后台命令，如果您的应用程序的步骤需要超过500毫秒的时间来完成，您需要跟踪处理状态，如果任务失败，您需要恢复或重试，Amazon SWF可以做到。</p>
<blockquote>
<p>注：这个服务比较重要，需要动手实践。</p>
</blockquote>
<h3 id="API-Gateway"><a href="#API-Gateway" class="headerlink" title="API Gateway"></a>API Gateway</h3><p>API Gateway是AWS一个Serverless有关的重要的服务，常用于触发Lambda function。</p>
<blockquote>
<p>注：这个服务在构建无服务架构的时候非常重要，但不会在考试中涉及很多细节，只需要了解其作用，用法即可。</p>
</blockquote>
<h3 id="Elasic-Transcoder"><a href="#Elasic-Transcoder" class="headerlink" title="Elasic Transcoder"></a>Elasic Transcoder</h3><p>用于视频转码。</p>
<h2 id="Message"><a href="#Message" class="headerlink" title="Message"></a>Message</h2><p>消息服务是AWS一个非常重要的服务，我们可以通过SNS(Simple Noticfication Service)发送短信，邮件提示，使用SQS（Simple Queue Service）构建一个保证交付的消息队列，使用SES(Simple Email Service)收发邮件。</p>
<h2 id="Desktop-amp-App-Streaming"><a href="#Desktop-amp-App-Streaming" class="headerlink" title="Desktop &amp; App Streaming"></a>Desktop &amp; App Streaming</h2><h3 id="workspace"><a href="#workspace" class="headerlink" title="workspace"></a>workspace</h3><p>一个在AWS云端的远程办公桌面。</p>
<h3 id="AppStream2-0"><a href="#AppStream2-0" class="headerlink" title="AppStream2.0"></a>AppStream2.0</h3><p><a href="https://aws.amazon.com/appstream2/" target="_blank" rel="external">AppStream</a>可以将桌面应用程序流式传输到运行Web浏览器的任何设备，安全地从任何地方即时访问桌面应用程序，如AWS console。</p>
<blockquote>
<ul>
<li>参考资料</li>
<li><a href="https://www.linuxnix.com/amazon-aws-regions-vs-availability-zones-vs-edge-locations-vs-data-centers/" target="_blank" rel="external">https://www.linuxnix.com/amazon-aws-regions-vs-availability-zones-vs-edge-locations-vs-data-centers/</a></li>
</ul>
</blockquote>
</div></article><article><header><h2><a href="/2017/02/24/vim学习小计/">vim学习小计</a></h2></header><div class="article-meta clearfix"><time class="left">2017 2 月 24 日</time><ul class="tags left"></ul><ul class="tags right"><li><a href="/tags/vim/">vim</a></li><li><a href="/tags/工具/">工具</a></li></ul></div><div class="markdown-body"><h1 id="vim常用命令"><a href="#vim常用命令" class="headerlink" title="vim常用命令"></a>vim常用命令</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>说起来，从接触Linux到现在，使用Vim大概有一年的时间，大部分时候主要在编辑一些配置文件，查看文档使用。算不上vim的高级玩家，在此主要针对vim的一些常见使用场景做一个命令汇总。</p>
<h2 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h2><pre><code>vim -On file1 file2 # 左右打开两个文件
vim -on file1 file2 # 上下打开两个文件
vim -d file1 file2 # diff
</code></pre><h2 id="编辑常用"><a href="#编辑常用" class="headerlink" title="编辑常用"></a>编辑常用</h2><pre><code>数字+hjkl 上下左右
^ $ 跳转到行首行位
gg G 首行 尾行
aAoO 插入在前后上下
数字+yy 数字+pp 复制粘贴
</code></pre><p>通过<code>c-f</code>向下翻页，<code>c-b</code>向上翻页；<code>c-e</code>逐行下滚，<code>c-y</code>逐行上滚。这在几乎所有Unix软件中都是好使的，比如man和less。 <code>H</code>可以移动到屏幕的首行，<code>L</code>到屏幕尾行，<code>M</code>到屏幕中间。</p>
<p><code>zt</code>可以置顶当前行，通常用来查看完整的下文，比如函数、类的定义。 <code>zz</code>将当前行移到屏幕中部，<code>zb</code>移到底部。</p>
<h2 id="多行编辑"><a href="#多行编辑" class="headerlink" title="多行编辑"></a>多行编辑</h2><p>最常用的编辑即为块注释和块取消注释:</p>
<pre><code>c-v 向下选中要被注释的行 # 选中模式
I # insert，在首行插入注释符
Esc # 推出即将首行更改应用到选中行
</code></pre><p>取消块注释差不多，选中之后<code>x</code>即可</p>
<h2 id="多窗口编辑"><a href="#多窗口编辑" class="headerlink" title="多窗口编辑"></a>多窗口编辑</h2><pre><code>:split file 横屏打开一个文件
:vsplit file 竖屏打开一个文件
c-w hjkl 上下左右切换活动窗口
c-w w 顺序切换
c-w HJKL 上下左右移动窗口
</code></pre><p>vim有多标签功能Tag，但我觉得用得很少，在此不表<br>另外用得比较多的，前后台切换（这个其实是Linux的用法）：</p>
<pre><code>切换到后台: c-z
切换到前台： fg 回车
</code></pre><h2 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h2><pre><code>ZZ 保存退出
ZQ 不保存退出
</code></pre><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>显示行号： <code>:set nu</code><br>设置编码： <code>:set encoding:utf-8</code><br>美化json: <code>:%!python -m json.tool</code><br>全局替换:  <code>:%s/被替换的/替换后的/g</code><br>解决粘贴时跳行问题: <code>:set paste</code></p>
</div></article><article><header><h2><a href="/2017/02/23/Lambda初体验/">Lambda初体验</a></h2></header><div class="article-meta clearfix"><time class="left">2017 2 月 23 日</time><ul class="tags left"></ul><ul class="tags right"><li><a href="/tags/AWS/">AWS</a></li><li><a href="/tags/Serverless/">Serverless</a></li></ul></div><div class="markdown-body"><h1 id="使用Lambda和CloudTrail给新创建的bucket打上tag"><a href="#使用Lambda和CloudTrail给新创建的bucket打上tag" class="headerlink" title="使用Lambda和CloudTrail给新创建的bucket打上tag"></a>使用Lambda和CloudTrail给新创建的bucket打上tag</h1><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><h3 id="什么是Lambda"><a href="#什么是Lambda" class="headerlink" title="什么是Lambda"></a>什么是Lambda</h3><p>AWS Lambda提供了一个不需要服务器就能运行代码的平台，有以下特点：</p>
<ul>
<li>高伸缩：适用于一天数次的访问频率到一秒数千次的访问量，横向纵向灵活扩展</li>
<li>按需付费：你只需要根据访问量付费，价格非常便宜（$0.20每百万次访问）</li>
<li>高可用：AWS负责维护代码运行的环境，使用者无需操心底层资源的配置，性能，维护</li>
<li>支持语言：目前官方支持NodeJS, java, C#, Python, 有第三方工具可以支持多种语言</li>
<li>事件响应：Function是Lambda的计算单元，可以由各种事件触发，这个事件可以是由AWS内部的资源发出的，也可以来自AWS外部。（比如往S3存放一个文件，或者一个HTTP请求）</li>
</ul>
<p>使用场景：</p>
<ul>
<li>构建一个数据触发的程序用于处理数据，处理Amazon Kinesis中存储的流数据</li>
<li>构建一个微服务后端的一个模块，配合API Gateway用于响应HTTP事件</li>
</ul>
<h3 id="什么是CloudTrail"><a href="#什么是CloudTrail" class="headerlink" title="什么是CloudTrail"></a>什么是CloudTrail</h3><p>用于记录和追踪AWS内部的各种API调用，你可以在CloudTrail的日志中找到所有该账户在AWS中操作资源的事件，包括Console操作，SDK，AWS CLI，以及跟高级服务的调用。</p>
<p>你可以在事件中找到资源调用者的用户信息，源IP，以及调用时间。</p>
<h3 id="使用Lambda和CloudTrail实现创建一个S3-bucket自动打上创建者的tag"><a href="#使用Lambda和CloudTrail实现创建一个S3-bucket自动打上创建者的tag" class="headerlink" title="使用Lambda和CloudTrail实现创建一个S3 bucket自动打上创建者的tag"></a>使用Lambda和CloudTrail实现创建一个S3 bucket自动打上创建者的tag</h3><p>CouldTrail 会把所有监控到的API调用的时间写到S3 bucket里的日志文件中，同时产生一个event时间，我们要做的就是用这个event事件触发一个Lambda function，调用AWS的SDK获取API调用日志，当发现日志里出现了CreateBucket事件的时候，给这个bucket打上形如“Owner:dyd”的tag。</p>
<p><img src="https://docs.aws.amazon.com/lambda/latest/dg/images/wt-cloudtrail-100.png" alt=""></p>
<p>非常类似于这个功能不过最后吧SNS换成了打tag。</p>
<ul>
<li>AWS CloudTrail把日志保存在S3中</li>
<li>S3 发出一个<code>s3:ObjectCreated:*</code>的事件触发了Lambda function，这个配置在Lambda中实现</li>
<li>Lambda使用你创建function时赋予的role来执行function</li>
<li>Lambda获取S3的事件作为一个参数，确定CloudTrail的日志存放在S3中的位置，进而读取日志，当日志中出现eventName=CreateBucket的事件的时候，获取该事件对应的BucketName和UserName，调用AWS S3 SDK</li>
<li>使用S3 SDK给对应的bucket打上包含UserName的tag</li>
</ul>
<h2 id="Step-by-Step"><a href="#Step-by-Step" class="headerlink" title="Step by Step"></a>Step by Step</h2><h3 id="第一步，创建一个Trail"><a href="#第一步，创建一个Trail" class="headerlink" title="第一步，创建一个Trail"></a>第一步，创建一个Trail</h3><p>首先你得有一个AWS账号，选择一个Region，进入CloudTrail的界面。<br>选择左侧<strong>Trail -&gt; Add new Tail</strong>，填写如下信息</p>
<blockquote>
<p>Trail Name: Trail的名字，只需要不于同Region的CloudTrail重名即可<br>Apply trail to all regions: 是否需要在所有Region都使用这个CloudTrail，否则只监听CloudTrail所在Region的API调用事件。<br>S3 bucket: 用于存放CloudTrail日志</p>
</blockquote>
<p>填选好后点选<strong>Create</strong></p>
<p><img src="/images/Create_CloudTrail.png" alt=""></p>
<p>点击新创建的Trail你可以进行配置，确认右上角log为打开状态。<br>过一会儿你就可以在API activity history里看到如下所示的一些event事件了，主要包含事件触发的用户名，时间名称，类型，资源名称。</p>
<p><img src="/images/CloudTrail_events.png" alt=""></p>
<h3 id="第二步：为Lmabda-function创建一个role"><a href="#第二步：为Lmabda-function创建一个role" class="headerlink" title="第二步：为Lmabda function创建一个role"></a>第二步：为Lmabda function创建一个role</h3><p>进入 <strong>IAM -&gt; Roles</strong>， 点击 <strong>Create New Role</strong>，输入Role的名字，点选下一步：<br>选择 <strong>AWS Lambda</strong>，下一步：绑定一个Polly<br>这里因为我们除了读取S3的object还需要给S3的bucket打tag的权限，所以方便起见选择<code>AmazonS3FullAccess</code>，另外这个Role需要执行Lambda的权限，所以还需要选择<code>AWSLambdaFullAccess</code>，最后，<strong>确认 -&gt; 创建</strong></p>
<p><img src="/images/Create_Lambda_Role.png" alt=""></p>
<h3 id="第三步：创建Lambda-function"><a href="#第三步：创建Lambda-function" class="headerlink" title="第三步：创建Lambda function"></a>第三步：创建Lambda function</h3><p>进入<strong>Lambda</strong>的界面点选<strong>Create a Lambda function</strong><br>在Select blueprint的页面选择python2.7的运行环境，选择s3-get-object-python作为预配置</p>
<p><img src="/images/Create_Lambda_Select_Blueprint.png" alt=""></p>
<p>Configure Triggers 页面选择存放CouldTrail日志的S3 Bucket, 事件类型选 Object Created，勾选上Enable Trigger。</p>
<p><img src="/images/Create_Lambda_Configure_Triggers.png" alt=""></p>
<p>点击<strong>Next</strong>，输入Name，选择Role Name为上一步创建的Role，其他保持默认，<strong>Next -&gt; 确认配置 -&gt; Create function </strong></p>
<p><img src="/images/Create_Lambda_Review.png" alt=""></p>
<p>这里关于Lambda的部署方式，在生产中一般使用打包上传的方式，这里我们的案例比较简单，就直接在consloe上编辑了。</p>
<h3 id="第四步：-获取测试数据"><a href="#第四步：-获取测试数据" class="headerlink" title="第四步： 获取测试数据"></a>第四步： 获取测试数据</h3><p>首先你需要测试你的Function能够被正常Trigger并拿到测试数据，所以你需要取消注释掉lambda_hander里面的第一行：</p>
<pre><code class="python">print(&quot;Received event: &quot; + json.dumps(event, indent=2))
</code></pre>
<p>余下的不用管，点击<strong>test</strong>，你可以在Log output中看到你的测试内容，即event事件，即可。</p>
<p>接下来你需要取得一份样本数据用于测试，最简单的方法就是创建一个S3 bucket，<strong>这里一定要注意，创建的bucket需要和CloudTrail在同一个Region，否则事件是无法被捕获的。</strong><br>进入<strong>S3 -&gt; Create bucket</strong> 快速创建一个Bucket:</p>
<p><img src="/images/Create_S3_Bucket.png" alt=""></p>
<p>稍等数分钟，这里会有十几分钟的延迟，在Cloudwatch中查看Lambda打印的log：<br>进入<strong>Cloudwatch -&gt; Logs -&gt; 对应Lambda名称的Log Group -&gt; 找到时间点对应的Log Stream</strong>，filter你的bucket名字你会发现一条这样的Log:</p>
<pre><code class="json">{
  &quot;Records&quot;: [
    {
      &quot;eventVersion&quot;: &quot;2.0&quot;,
      &quot;eventTime&quot;: &quot;2017-02-23T13:42:18.654Z&quot;,
      &quot;requestParameters&quot;: {
        &quot;sourceIPAddress&quot;: &quot;54.224.144.182&quot;
      },
      &quot;s3&quot;: {
        &quot;configurationId&quot;: &quot;fa401b72-97f2-48e8-9b74-b8d2a726a771&quot;,
        &quot;object&quot;: {
          &quot;eTag&quot;: &quot;25c76ac2f0284796baacebca934c3875&quot;,
          &quot;sequencer&quot;: &quot;0058AEE6BA925A5848&quot;,
          &quot;key&quot;: &quot;AWSLogs/994910148131/CloudTrail/us-east-1/2017/02/23/994910148131_CloudTrail_us-east-1_20170223T1340Z_nIJHY6wtS6EQRUtz.json.gz&quot;,
          &quot;size&quot;: 17181
        },
        &quot;bucket&quot;: {
          &quot;arn&quot;: &quot;arn:aws:s3:::yidongtrail&quot;,
          &quot;name&quot;: &quot;yidongtrail&quot;,
          &quot;ownerIdentity&quot;: {
            &quot;principalId&quot;: &quot;A1EKSBYVFNIFR0&quot;
          }
        },
        &quot;s3SchemaVersion&quot;: &quot;1.0&quot;
      },
      &quot;responseElements&quot;: {
        &quot;x-amz-id-2&quot;: &quot;jN1tHU9s2/Y1RvA31IG34MhbHiAtB/45v938qdzsff2ufgZ8v5osNCcPKNWVrlnuh4qTs/J0odg=&quot;,
        &quot;x-amz-request-id&quot;: &quot;57FBF80C150FB0CE&quot;
      },
      &quot;awsRegion&quot;: &quot;us-east-1&quot;,
      &quot;eventName&quot;: &quot;ObjectCreated:Put&quot;,
      &quot;userIdentity&quot;: {
        &quot;principalId&quot;: &quot;AWS:AROAI6ZMWVXR3IZ6MKNSW:i-012030f0061c32dcd&quot;
      },
      &quot;eventSource&quot;: &quot;aws:s3&quot;
    }
  ]
}
</code></pre>
<p>这就是我们要的测试数据</p>
<h3 id="编写Function函数"><a href="#编写Function函数" class="headerlink" title="编写Function函数"></a>编写Function函数</h3><p>把上一步得到的json文件放到Lambda的“单元测试”（我是这么理解的）里：<br><strong>选中你的Function -&gt; Actions -&gt; Configure test event</strong>，直接把这个json粘贴进去。</p>
<p>下面你可以一边写代码一边运行测试。<br>我得说AWS console的这个工具确实不太好用，推荐自行谷歌好用的第三方工具做这个事。我是在本地进行测试和断点调试的。<br>写好的代码在这里，可以作为参考：<a href="https://github.com/ADU-21/test_lambda/blob/master/lambda.py" target="_blank" rel="external">https://github.com/ADU-21/test_lambda/blob/master/lambda.py</a></p>
<p>保存测试通过之后，你可以再尝试创建一个bucket，这个bucket在创建完成后十几分钟会被自动打上一个tag.</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>Tag作为AWS官方推荐的管理资源计费的方式却并没有提供相应的接口给每个用户创建的资源打上自己的tag，我做这个实验的初衷原本是想通过这种方式给所有的AWS资源都打上tag，但是在操作过程中发现CloudTrail的日志并没有想象中那么容易过滤出有用信息，比如Create Instance这个动作并不会只有一个CreateInstance的event时间被产生，而是会在长达数十分钟的时间里产生多个RunInsatance的事件，时间延迟也是一个不小的问题，关于资源管理，还需要探索更好的方案。</p>
</div></article><div class="archive-pagination"><div class="paginator"><a class="extend prev" rel="prev" href="/archives/2017/">&laquo;</a><a class="page-number" href="/archives/2017/">1</a><span class="page-number current">2</span><a class="page-number" href="/archives/2017/page/3/">3</a><a class="extend next" rel="next" href="/archives/2017/page/3/">&raquo;</a></div></div></div><div class="block-sidebar column one-fourth"><div class="widget text-content"><p>杜屹东 生于 1993.12.16, 英文 ID Luke Du</p>
<ul>
<li>现就职于<a href="https://www.thoughtworks.com/">ThoughtWorks</a></li>
<li>毕业于 <a href="http://www.xhu.edu.cn/">西华大学</a> 计算机科学与技术</li>
<li>喜欢<a href="http://baike.baidu.com/view/39292.htm">史铁生</a>, <a href="https://movie.douban.com/celebrity/1012521/">David Fincher</a> 和 <a href="http://baike.baidu.com/view/2556.htm">陈奕迅</a></li>
<li>在剧组和影视公司工作过，对影视前后期工作略知一二，曾参与成龙大哥电影<a href="https://movie.douban.com/subject/24529353/">《绝地逃亡》</a>制作</li>
<li>曾骑行成都-拉萨，成都-北京，海南环岛</li>
</ul>
<p>目前专注于：</p>
<ul>
<li>AWS - 认证考试</li>
<li>DevOps - 文化组织变革</li>
<li>CI/CD - 持续集成与持续交付</li>
<li>Agile - 敏捷文化</li>
</ul>
</div><div class="widget tags"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AWS/">AWS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Agile/">Agile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CDN/">CDN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cloudfront/">Cloudfront</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataBase/">DataBase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DevOps/">DevOps</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/EC2/">EC2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/">HTTPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IAM/">IAM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Route53/">Route53</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/S3/">S3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Security/">Security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Serverless/">Serverless</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Study/">Study</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TDD/">TDD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ThoughtWorks/">ThoughtWorks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码/">代码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大事记/">大事记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习/">学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小结/">小结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小计/">小计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/部署与发布/">部署与发布</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul></div><div class="widget archives"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">5</span></li></ul></div><div class="widget text-content"><p>该博客使用基于 &nbsp;<a href="http://hexo.io">Hexo</a>&nbsp; 的 &nbsp;<a href="https://github.com/jysperm/hexo-theme-simpleblock">simpleblock</a>&nbsp; 主题。博客内容使用 &nbsp;<a href="https://aws.amazon.com/s3/">Amazon S3</a>&nbsp; 发布。最后生成于 2017-03-21.</p></div></div></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-80279850-1', 'auto');
ga('send', 'pageview');
</script><script>window.duoshuoQuery = {short_name: 'duuyidong'}</script><script src="https://static.duoshuo.com/embed.js"></script></body></html>